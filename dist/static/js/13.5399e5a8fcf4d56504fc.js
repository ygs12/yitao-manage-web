webpackJsonp([13],{b9Ah:function(e,t){},ifu1:function(e,t){},vXi7:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("7+uW"),d={name:"tree-item",props:{model:Object,url:String,isEdit:{type:Boolean,default:!1},nodes:Object,parentState:Boolean},created:function(){},data:function(){return{c1:"",c2:"",c3:"",isSelected:!1,open:!1,beginEdit:!1}},watch:{parentState:function(e){e||(this.open=e)}},computed:{isFolder:function(){return this.model.children&&this.model.children.length>0}},methods:{toggle:function(){var e=this;this.nodes.selected.isSelected=!1,this.isSelected=!0,this.nodes.selected=this,this.handleClick(this.model),0==this.model.parentId&&(this.nodes.opened&&this!=this.nodes.opened&&(this.nodes.opened.open=!1),this.nodes.opened=this),this.open=!this.open,this.model.isParent&&!this.isFolder&&this.open&&this.$http.get(this.url,{params:{pid:this.model.id}}).then(function(t){n.default.set(e.model,"children",t.data),e.model.children.forEach(function(t){t.path=[],e.model.path.forEach(function(e){return t.path.push(e)}),t.path.push(t.name)})}).catch(function(e){console.log(e)})},addChild:function(){var e=this,t={id:0,name:"新的节点",parentId:this.model.id,isParent:!1,sort:this.model.children.length+1};this.model.isParent?this.isFolder?(this.model.children.push(t),this.open=!0,this.handleAdd(t)):this.$http.get(this.url,{params:{pid:this.model.id}}).then(function(i){n.default.set(e.model,"children",i.data),e.model.children.push(t),e.open=!0,e.handleAdd(t)}):(n.default.set(this.model,"children",[t]),this.model.isParent=!0,this.open=!0,this.handleAdd(t))},deleteChild:function(){var e=this;this.$confirm("此操作将永久删除数据，是否继续?","提示",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}).then(function(){e.handleDelete(e.model.id)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},editChild:function(){var e=this;this.beginEdit=!0,this.$nextTick(function(){return e.$refs[e.model.id].focus()})},afterEdit:function(){this.model.beginEdit&&(this.beginEdit=!1,this.handleEdit(this.model.id,this.model.name))},handleAdd:function(e){this.$emit("handleAdd",e)},handleDelete:function(e){this.$emit("handleDelete",e)},handleEdit:function(e,t){this.$emit("handleEdit",e,t)},handleClick:function(e){this.$emit("handleClick",e)}}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-list-tile",{staticClass:"level1 pt-0 pb-0 mt-0 mb-0",class:{selected:e.isSelected},on:{click:e.toggle}},[i("v-list-tile-avatar",[e.model.isParent?i("v-icon",[e._v(e._s(e.open?"folder_open":"folder"))]):e._e(),e._v(" "),e.model.isParent?e._e():i("v-icon",[e._v("insert_drive_file")])],1),e._v(" "),i("v-list-tile-content",[i("v-list-tile-title",{directives:[{name:"show",rawName:"v-show",value:!e.beginEdit,expression:"!beginEdit"}]},[i("span",[e._v(e._s(e.model.name))])]),e._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:e.beginEdit,expression:"beginEdit"},{name:"model",rawName:"v-model",value:e.model.name,expression:"model.name"}],ref:e.model.id,domProps:{value:e.model.name},on:{click:function(e){e.stopPropagation()},blur:e.afterEdit,keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.afterEdit(t):null},input:function(t){t.target.composing||e.$set(e.model,"name",t.target.value)}}})],1),e._v(" "),e.isEdit?i("v-list-tile-action",[i("v-btn",{attrs:{icon:"",color:e.c1},on:{mouseover:function(t){e.c1="primary"},mouseout:function(t){e.c1=""},click:function(t){return t.stopPropagation(),e.addChild(t)}}},[i("i",{staticClass:"el-icon-plus"})])],1):e._e(),e._v(" "),e.isEdit?i("v-list-tile-action",[i("v-btn",{attrs:{icon:"",color:e.c2},on:{mouseover:function(t){e.c2="success"},mouseout:function(t){e.c2=""},click:function(t){return t.stopPropagation(),e.editChild(t)}}},[i("i",{staticClass:"el-icon-edit"})])],1):e._e(),e._v(" "),e.isEdit?i("v-list-tile-action",[i("v-btn",{attrs:{icon:"",color:e.c3},on:{mouseover:function(t){e.c3="error"},mouseout:function(t){e.c3=""},click:function(t){return t.stopPropagation(),e.deleteChild(t)}}},[i("i",{staticClass:"el-icon-delete"})])],1):e._e()],1),e._v(" "),e.isFolder?i("v-list",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"ml-4 pt-0 pb-0",attrs:{dense:"",transition:"scale-transition"}},e._l(e.model.children,function(t,n){return i("tree-item",{key:n,staticClass:"item",attrs:{model:t,url:e.url,isEdit:e.isEdit,nodes:e.nodes,parentState:e.open},on:{handleAdd:e.handleAdd,handleEdit:e.handleEdit,handleDelete:e.handleDelete,handleClick:e.handleClick}})})):e._e()],1)},staticRenderFns:[]};var s=i("VU/8")(d,o,!1,function(e){i("ifu1")},"data-v-7a006605",null).exports,l={name:"vTree",props:{url:String,isEdit:{type:Boolean,default:!1},treeData:{type:Array}},data:function(){return{db:[],nodes:{opened:null,selected:{isSelected:!1}}}},components:{TreeItem:s},created:function(){console.log(this.treeData),this.treeData&&this.treeData.length>0?this.db=this.treeData:this.getData()},methods:{getData:function(){var e=this;this.$http.get(this.url,{params:{pid:0}}).then(function(t){e.db=t.data,e.db.forEach(function(e){return e.path=[e.name]})})},handleAdd:function(e){this.$emit("handleAdd",this.copyNodeInfo(e))},handleEdit:function(e,t){this.$emit("handleEdit",e,t)},handleDelete:function(e){this.deleteById(e,this.db),this.$emit("handleDelete",e)},handleClick:function(e){this.$emit("handleClick",this.copyNodeInfo(e))},deleteById:function(e,t){var i=t||this.db;for(var n in i){var d=i[n];if(d.id==e)return void i.splice(n,1);d.children&&d.children.length>0&&this.deleteById(e,d.children)}},copyNodeInfo:function(e){var t={};for(var i in e)t[i]=e[i];return t}},watch:{}},a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-list",{staticClass:"pt-0 pb-0",attrs:{dense:""}},e._l(e.db,function(t,n){return i("TreeItem",{key:n,staticClass:"item",attrs:{model:t,url:e.url,isEdit:e.isEdit,nodes:e.nodes},on:{handleAdd:e.handleAdd,handleEdit:e.handleEdit,handleDelete:e.handleDelete,handleClick:e.handleClick}})}))},staticRenderFns:[]};var r=i("VU/8")(l,a,!1,function(e){i("b9Ah")},"data-v-6d6a9957",null);t.default=r.exports}});
//# sourceMappingURL=13.5399e5a8fcf4d56504fc.js.map