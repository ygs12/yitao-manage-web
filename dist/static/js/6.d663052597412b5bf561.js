webpackJsonp([6],{"Nmb/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),i=a.n(s),o=a("QmSG"),n=a("MJ8A"),r={name:"v-template",data:function(){return{specifications:[],oldSpec:[],dialog:!1,confirmDialog:!1,confirm:!1,currentNode:{},isInsert:!1,rowsPerPageItems:[20],pagination:{rowsPerPage:20},units:o.a.unitOption,treeData:n.d}},methods:{handleClick:function(t){var e=this;t.isParent||(setTimeout(function(){e.specifications=n.c,e.oldSpec=n.c,e.dialog=!0,e.isInsert=!1},200),this.currentNode=t)},addGroup:function(){this.specifications.push({group:"",params:[]}),this.pagination.page=this.pagination.totalItems},addParam:function(t){this.specifications[t].params.push({k:"",searchable:!1,global:!0,numerical:!1,unit:"",options:[]})},addOption:function(t,e){this.specifications[t].params[e].options.push("")},saveTemplate:function(){var t=this;this.dialog=!0,this.$http({method:this.isInsert?"post":"put",url:"/item/spec",data:this.$qs.stringify({categoryId:this.currentNode.id,specifications:i()(this.specifications)})}).then(function(){t.dialog=!1,t.$message.success("保存成功！")}).catch(function(){t.$message.error("保存失败！")})},deleteGroup:function(t){this.specifications.splice(t,1)},deleteParam:function(t,e){this.specifications[t].params.splice(e,1)},deleteOption:function(t,e,a){this.specifications[t].params[e].options.splice(a,1)}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-flex",{attrs:{xs12:"",sm10:""}},[a("v-card-title",[t._v("选择分类，查看规格参数模板：")]),t._v(" "),a("v-tree",{attrs:{url:"/item/category/list",treeData:t.treeData,isEdit:!1},on:{handleClick:t.handleClick}}),t._v(" "),a("v-dialog",{attrs:{width:"660px",scrollable:"",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dense:"",tabs:""}},[a("v-toolbar-title",[a("v-breadcrumbs",[a("v-icon",{attrs:{slot:"divider"},slot:"divider"},[t._v("chevron_right")]),t._v(" "),t._l(t.currentNode.path,function(e,s){return a("v-breadcrumbs-item",{key:s},[t._v(t._s(e))])})],2)],1),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.specifications=t.oldSpec,t.dialog=!1}}},[a("v-icon",[t._v("clear")])],1)],1),t._v(" "),a("v-card-text",[a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},t._l(t.specifications,function(e,s){return a("v-card",{key:s,staticClass:"my-3"},[a("v-card-title",[a("strong",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.group,expression:"spec.group"}],staticStyle:{"font-size":"16px"},attrs:{type:"text",placeholder:"请输入分组名称"},domProps:{value:e.group},on:{input:function(a){a.target.composing||t.$set(e,"group",a.target.value)}}})]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{small:"",icon:""},on:{click:function(e){t.deleteGroup(s)}}},[a("i",{staticClass:"el-icon-delete"})])],1),t._v(" "),a("v-divider"),t._v(" "),a("v-card-text",{staticClass:"px-5"},[a("v-expansion-panel",{attrs:{inset:""}},t._l(e.params,function(e,i){return a("v-expansion-panel-content",{key:i},[a("v-layout",{attrs:{slot:"header",wrap:"",row:""},slot:"header"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.k,expression:"param.k"}],attrs:{placeholder:"请输入属性名",size:"10"},domProps:{value:e.k},on:{click:function(t){t.stopPropagation()},input:function(a){a.target.composing||t.$set(e,"k",a.target.value)}}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{small:"",icon:""},on:{click:function(e){e.stopPropagation(),t.deleteParam(s,i)}}},[a("i",{staticClass:"el-icon-delete",on:{click:function(e){e.stopPropagation(),t.deleteParam(s,i)}}})])],1),t._v(" "),a("v-card",{staticClass:"mx-5"},[a("v-layout",{attrs:{row:""}},[a("v-checkbox",{attrs:{color:"success",label:"是否是可搜索"},model:{value:e.searchable,callback:function(a){t.$set(e,"searchable",a)},expression:"param.searchable"}}),t._v(" "),a("v-checkbox",{attrs:{color:"success",label:"是否全局属性"},model:{value:e.global,callback:function(a){t.$set(e,"global",a)},expression:"param.global"}})],1),t._v(" "),a("v-layout",{attrs:{row:""}},[a("v-checkbox",{attrs:{color:"success",label:"是否数值类型"},model:{value:e.numerical,callback:function(a){t.$set(e,"numerical",a)},expression:"param.numerical"}}),t._v(" "),a("v-text-field",{directives:[{name:"show",rawName:"v-show",value:e.numerical,expression:"param.numerical"}],attrs:{label:"计量单位"},model:{value:e.unit,callback:function(a){t.$set(e,"unit",a)},expression:"param.unit"}})],1),t._v(" "),e.options.length>0?a("v-card-text",t._l(e.options.length,function(o){return a("v-layout",{key:o,attrs:{row:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.options[o-1],expression:"param.options[j-1]"}],attrs:{placeholder:"请输入选项值"},domProps:{value:e.options[o-1]},on:{input:function(a){a.target.composing||t.$set(e.options,o-1,a.target.value)}}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{small:"",icon:""},on:{click:function(e){t.deleteOption(s,i,o-1)}}},[a("i",{staticClass:"el-icon-delete"})])],1)})):a("v-alert",{attrs:{outline:"",color:"info",icon:"info",value:!0}},[t._v("\n                            尚未添加任何默认选项.\n                          ")]),t._v(" "),a("v-card-text",{staticStyle:{"line-height":"20px"}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{"offset-xs10":""}},[a("v-btn",{attrs:{depressed:"",fab:"",small:""},on:{click:function(e){t.addOption(s,i)}}},[a("v-icon",[t._v("add")])],1)],1)],1)],1)],1)],1)}))],1),t._v(" "),a("v-card-actions",[a("v-flex",{attrs:{"offset-xs8":""}},[a("v-btn",{attrs:{small:""},on:{click:function(e){t.addParam(s)}}},[t._v("添加新属性")])],1)],1)],1)}))],1)],1)],1),t._v(" "),a("v-card-actions",{staticClass:"elevation-10"},[a("v-flex",{attrs:{"offset-xs4":"",xs4:""}},[a("v-btn",{attrs:{block:"",center:"",color:"primary"},on:{click:t.saveTemplate}},[t._v("保存规格模板")])],1),t._v(" "),a("v-flex",{attrs:{"offset-xs1":"",xs1:""}},[a("v-btn",{attrs:{small:""},on:{click:t.addGroup}},[t._v("\n              添加新分组\n            ")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(r,c,!1,function(t){a("mQLK")},"data-v-c67c15f2",null);e.default=l.exports},mQLK:function(t,e){}});
//# sourceMappingURL=6.d663052597412b5bf561.js.map